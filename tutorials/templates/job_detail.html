{% extends 'base.html' %}
{% load static %}

{% block title %}Job Details | Swamp Hiring{% endblock %}

{% block content %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/job_detail.css' %}">

    <div class="job-detail-container">
        <h1>{{ job.title }}</h1>
        <p><strong>Company:</strong> {{ job.company_name }}</p>
        <p><strong>Location:</strong> {{ job.location }}</p>
        <p><strong>Salary:</strong> ${{ job.salary }}</p>
        <p><strong>Job Type:</strong> {{ job.job_type }}</p>
        <p><strong>Description:</strong> {{ job.description }}</p>

        
        <!-- Button container for alignment -->
        <div class="button-container">
            <a href="{% url 'applicants-home-page' %}" class="btn-primary">Back to Jobs</a>

            {% if existing_application %}
                <!-- ✅ Show a message instead of the Apply Now button -->
                <p class="already-applied-message">✅ You have already applied for this job.</p>
            {% else %}
                <!-- ✅ Show the Apply button if the user has not applied yet -->
                <form method="POST" action="{% url 'apply_for_job' job.id %}">
                    {% csrf_token %}
                    <button type="submit" class="btn-primary">Apply Now</button>
                </form>
            {% endif %}
        </div>
    </div>
{% endblock %}
