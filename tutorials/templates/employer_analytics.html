{% extends 'base.html' %}
{% load static %}

{% block title %}Employer Reports | Swamp Hiring{% endblock %}
{% block content %}
<head>
    <link rel="stylesheet" href="{% static 'css/employer_reports.css' %}">
</head>

    <header>
        <h1>Hiring Reports Overview</h1>
    </header>

    <section class="reports-overview">
        <div class="report-card">
            <h3>Total Job Listings</h3>
            <p class="report-value">{{ total_jobs }}</p>
        </div>
        <div class="report-card">
            <h3>Total Applicants</h3>
            <p class="report-value">{{ total_applicants }}</p>
        </div>
        <div class="report-card">
            <h3>Average Applications per Job</h3>
            <p class="report-value">{{ average_apps_per_job }}</p>
        </div>
        <div class="report-card">
            <h3>Pending Interviews</h3>
            <p class="report-value">{{ pending_interviews }}</p>
        </div>
    </section>

    <section class="chart-container">
        <div class="chart-card">
            <h3>Applicants Per Job</h3>
            <canvas id="applicantsChart"></canvas>
        </div>
        <div class="chart-card">
            <h3>Interviews Per Job</h3>
            <canvas id="interviewsChart"></canvas>
        </div>
    </section>

    <section class="detailed-reports">
        <h2>Detailed Hiring Insights</h2>
        <table>
            <thead>
                
                <tr>
                    <th>Job Title</th>
                    <th>Applicants</th>
                    <th>Interviews Scheduled</th>
                    <th>Hires</th>
                </tr>
                </thead>
                <tbody>
                    {% for job in job_analytics %}
                    <tr>
                        <td>{{ job.title }}</td>
                        <td>{{ job.applicants }}</td>
                        <td>{{ job.interviews }}</td>
                        <td>{{ job.hires }}</td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="4">No hiring data available.</td>
                    </tr>
                    {% endfor %}
                </tbody>
                </table>
                </section>

                <script id="job_titles_json" type="application/json">
                    {{ job_titles|json_script:"jobTitlesJson" }}
                </script>
                
                <script id="job_applicants_json" type="application/json">
                    {{ job_applicants|json_script:"jobApplicantsJson" }}
                </script>
                
                <script id="job_interviews_json" type="application/json">
                    {{ job_interviews|json_script:"jobInterviewsJson" }}
                </script>
                
                
                
                

                <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                <script src="{% static 'js/employer_analytics.js' %}"></script>
{% endblock %}
