{% extends 'admin_base.html' %}

{% block title %}Job Listings | Swamp Hiring{% endblock %}

{% block content %}
<section class="job-listings">
    <h2>Recent Job Listings</h2>
    <table>
        <thead>
            <tr>
                <th>Job Title</th>
                <th>Company</th>
                <th>Status</th>
                <th>Applicants</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% if jobs %}
                {% for job in jobs %}
                <tr>
                    <td>{{ job.title }}</td>
                    <td>{{ job.company_name }}</td>
                    <td><span class="badge {% if job.status == 'Open' %}open{% else %}closed{% endif %}">{{ job.status }}</span></td>
                    <td>{{ job.applicant_count }}</td>
                    <td><button class="view-btn" data-job-id="{{ job.id }}">View</button></td>
                </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="5" class="no-jobs">No job listings available</td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</section>

<script>
    // Add functionality to view job details
    document.querySelectorAll('.view-btn').forEach(button => {
        button.addEventListener('click', function() {
            const jobId = this.getAttribute('data-job-id');
            // Navigate to job detail page
            window.location.href = `/admin_job_detail/${jobId}/`;
        });
    });
</script>
{% endblock %}
