{% extends 'base.html' %}
{% load static %}

{% block title %}Employer Reports | Swamp Hiring{% endblock %}
{% block content %}
<head>
    <link rel="stylesheet" href="{% static 'css/employer_reports.css' %}">
</head>

    <header>
        <h1>Hiring Reports Overview</h1>
    </header>

    <section class="reports-overview">
        <div class="report-card">
            <h3>Total Job Listings</h3>
            <p class="report-value">12</p>
        </div>
        <div class="report-card">
            <h3>Total Applicants</h3>
            <p class="report-value">245</p>
        </div>
        <div class="report-card">
            <h3>Average Applications per Job</h3>
            <p class="report-value">20.4</p>
        </div>
        <div class="report-card">
            <h3>Offer Acceptance Rate</h3>
            <p class="report-value">67%</p>
        </div>
    </section>

    <section class="chart-container">
        <div class="chart-card">
            <h3>Applicants Per Job</h3>
            <canvas id="applicantsChart"></canvas>
        </div>
        <div class="chart-card">
            <h3>Offer Acceptance Rate</h3>
            <canvas id="acceptanceChart"></canvas>
        </div>
    </section>

    <section class="detailed-reports">
        <h2>Detailed Hiring Insights</h2>
        <table>
            <thead>
                <tr>
                    <th>Job Title</th>
                    <th>Applicants</th>
                    <th>Interviews Scheduled</th>
                    <th>Hires</th>
                    <th>Acceptance Rate</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Software Engineer</td>
                    <td>87</td>
                    <td>15</td>
                    <td>5</td>
                    <td>33%</td>
                </tr>
                <tr>
                    <td>Product Manager</td>
                    <td>58</td>
                    <td>10</td>
                    <td>3</td>
                    <td>30%</td>
                </tr>
                <tr>
                    <td>Data Scientist</td>
                    <td>100</td>
                    <td>20</td>
                    <td>10</td>
                    <td>50%</td>
                </tr>
            </tbody>
        </table>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const ctx1 = document.getElementById('applicantsChart').getContext('2d');
        const applicantsChart = new Chart(ctx1, {
            type: 'bar',
            data: {
                labels: ['Software Engineer', 'Product Manager', 'Data Scientist'],
                datasets: [{
                    label: 'Applicants Per Job',
                    data: [87, 58, 100],
                    backgroundColor: ['#1A73E8', '#34A853', '#FBBC05'],
                    borderRadius: 5
                }]
            },
        });

        const ctx2 = document.getElementById('acceptanceChart').getContext('2d');
        const acceptanceChart = new Chart(ctx2, {
            type: 'pie',
            data: {
                labels: ['Accepted', 'Declined'],
                datasets: [{
                    label: 'Offer Acceptance Rate',
                    data: [67, 33],
                    backgroundColor: ['#34A853', '#EA4335']
                }]
            },
        });
    </script>
{% endblock %}
